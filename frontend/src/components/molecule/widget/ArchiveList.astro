---
/**
 * /archive/year/monthã®ãƒªãƒ³ã‚¯ä¸€è¦§ã‚’ä½œã‚‹
 * 1ç•ªæœ€æ–°ã®æœˆã¯ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸæœˆã€æœ€å¤ã®æœˆã¯æ‰‹å‹•ã§è¨­å®š(å¤‰ã‚ã‚‰ãªã„ã‚‚ã®ãªã®ã§APIå©ã‹ãšãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹)
 */
interface Props {
	ulClass?: string;
	liClass?: string;
}
const { ulClass = "", liClass = "" } = Astro.props;

type ListContent = {
	year: number;
	month: number;
	link: string;
};

// ç¾åœ¨ã®å¹´ã¨æœˆã‚’å–å¾—
const date = new Date();
const latestYear = date.getFullYear();
const latestMonth = date.getMonth() + 1;

//æœ€å¤ã®å¹´ã¨æœˆã‚’å®šç¾©
const oldestYear = 2020;
const oldestMonth = 10;

//æœ€æ–°ã‹ã‚‰æœ€å¤ã¾ã§ã®æœˆã”ã¨ã®ãƒªãƒ³ã‚¯ã‚’ä½œæˆ
const archiveList: ListContent[] = [];
for (let year = latestYear; year >= oldestYear; year--) {
	for (let month = 12; month >= 1; month--) {
		if (year === oldestYear && month < oldestMonth) {
			break;
		}
		if (year === latestYear && month > latestMonth) {
			continue;
		}
		archiveList.push({
			year: year,
			month: month,
			link: `/archive/${year}/${month}`,
		});
	}
}
---

<ul class={ulClass}>
	{
		archiveList.map((content: ListContent) => (
			<li class={`text-lg my-2 ${liClass}`}>
				<a href={content.link}>
					ğŸ“‚{content.year}å¹´{content.month}æœˆ
				</a>
			</li>
		))
	}
</ul>

<style>
	/* é•·ã™ãã‚‹ã®å«Œãªã®ã§ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ã‚‹ */
	.slim-archive {
		padding-left: 1rem !important;
		padding-right: 3rem !important;
		overflow-y: scroll;
		height: 600px;
	}
</style>
