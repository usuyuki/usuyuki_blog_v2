---
import { ClientRouter } from "astro:transitions";
import { GoogleFontsOptimizer } from "astro-google-fonts-optimizer";
import {
	SITE_AUTHOR,
	SITE_SUB_TITLE,
	SITE_TITLE,
	SITE_URL,
	TWITTER_ID,
} from "~/consts";
import type { HeadMetaType } from "~/types/HeadMetaType";
import GoogleAnalytics from "~/components/atom/analytics/GoogleAnalytics.astro";

interface Props extends HeadMetaType {}
const { title, slug, description, ogImage } = Astro.props;
const url = SITE_URL + slug;
const pageTitle = `${title} | ${SITE_TITLE}`;
---

<meta name="robots" content="index, follow" />
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="format-detection" content="telephone=no" />
<meta name="generator" content={Astro.generator} />

<!-- favcion読み込み -->
<link rel="apple-touch-icon" type="image/png" href="/images/favicon/apple-touch-icon-180x180.png" />
<link rel="icon" type="image/png" sizes="192x192" href="/images/favicon/icon-192x192.png" />

<!-- sitemap -->
<link rel="sitemap" type="application/xml" href="/sitemap-index.xml" />

<!-- DNS prefetch and preconnect for font fallback -->
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

<!-- Google Fonts as fallback with optimized display -->
<GoogleFontsOptimizer
	url="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@500&display=swap"
/>

<!-- Google Analytics with Partytown -->
<GoogleAnalytics />
<title>{pageTitle}</title>
<meta name="author" content={SITE_AUTHOR} />
<meta name="description" content={description} />
<meta name="thumbnail" content={ogImage} />

<meta name="robots" content="max-image-preview:large" />
<meta property="og:locale" content="ja_JP" />
<meta property="og:site_name" content={SITE_TITLE + ' - ' + SITE_SUB_TITLE} />
<meta property="og:type" content="article" />
<meta property="og:title" content={pageTitle} />
<meta property="og:url" content={url} />
<meta property="og:image" content={ogImage} />
<meta property="og:image:secure_url" content={ogImage} />
<!-- <meta property="article:published_time" content="2023-03-02T11:44:01+00:00" />
<meta property="article:modified_time" content="2023-03-02T13:33:25+00:00" /> -->

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content={TWITTER_ID} />
<meta name="twitter:creator" content={TWITTER_ID} />
<meta name="twitter:title" content={pageTitle} />
<meta name="twitter:image" content={ogImage} />

<ClientRouter />
